================================================================
Sitecoreのセットアップ
================================================================
:doc:`pre-steps` にて必須ソフトウェアのインストールまで完了したら、Sitecore本体をインストールします。

Sitecoreのインストール
================================================================
管理者モードでPowerShellを起動し、``C:\resourcefiles`` にカレントディレクトリを移動します。

フォルダーの中にある、 **XP0-SingleDeveloper.ps1** の変数の定義を必要に応じて編集します。最低限設定する必要があると思われるパラメーターとその値の参考例を記載します。

.. csv-table:: パラメーター
   :header: "名前","デフォルト値", "設定値(例)", "備考" 

   "$Prefix", "sc910","sc910","Sitecoreのインスタンス名につけるプロフィックス。必要に応じて変更"
   "$SitecoreAdminPassword", "SIF-Default", "b", "adminのパスワード。bは簡単すぎるので本番の環境でbは指定してはいけません"
   "$SolrService", "Solr-7.2.1", "Solr-7.2.1", "solr Windowsサービスの名前"
   "$SqlAdminPassword", "Password123", "Password123", "SQL Serverのsa ユーザーのパスワードを指定する"

パラメーターの設定をしたら、変更を保存します。

.. note:: SitecoreAdminPasswordをデフォルトのSIF-Default のままにした場合、インストール中にランダムなパスワードが設定されます。パスワードはインストールのログファイルに出力されます。

後は、XP0-SingleDeveloper.ps1 を実行します。このとき、文字化けが発生する場合は、最初に

::

 .\XP0-SingleDeveloper.ps1

.. figure:: /images/installation/ins-sc01.png

環境に問題がなければ、エラーなくインストールが終了します。インストールはマシン性能にもよりますが、10分以上かかる場合があります。もしエラーが発生した場合は、ログファイルの内容を確認し、エラーの原因を取り除いてからインストールスクリプトを再実行してください。

.. note:: インストールスクリプトが出力したテキストが文字化けする場合は、インストールスクリプトを実行する前に、次のコマンドを実行します。:code:`[Console]::OutputEncoding = [Text.Encoding]::UTF8`

インストール内容の確認
================================================================
ブラウザーを起動して、Sitecoreのクリーンインストールされた環境にアクセスできることを確認します。インストールスクリプトのパラメーターで、$Prefix に sc910 を指定した場合は、``http://sc910.sc`` にブラウザーでアクセスすると次の図のようなページが表示されます。
/sitecore でログイン画面にアクセスでき、パラメーターで設定したadminユーザーのパスワードでログインできることを確認します。

.. figure:: /images/installation/ins-sc02.png

作成された証明書を確認すると、 xconnectとidentityServer用の証明書(クライアント、サーバー証明書兼用)が作成され、有効期間が２年間になっていることを確認できます。

.. figure:: /images/installation/ins-sc03.png

``C:\certificates`` フォルダーを確認すると、インストールスクリプトが作成したxconnect, identityServer用の証明書のpfxおよび、ルート証明書のpfx ファイルが保存されていることを確認できます。
本番の環境ではロール別のサーバーが分かれているので、そのサーバーに証明書をインポートして、インスタンス間で通信できるようにします。
また、xConnectと連携するプログラムを開発する場合は、連携プログラムが動作するマシンに証明書をインストールすることで、xConnectと連携するプログラムを動作させることができるようにできます。

.. figure:: /images/installation/ins-sc04.png

これでセットアップ完了が完了したので、:doc:`post-steps` でインストール後の後処理を実施します。